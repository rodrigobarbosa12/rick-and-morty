!function(g){"use strict";function y(t){return t}function b(t){return g.isArray(t)}function c(t){return!b(t)&&t instanceof Object}function o(t,e){return g.inArray(e,t)}function $(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)}function k(t){return t[t.length-1]}function x(){var n={};return $(function(t){return Array.prototype.slice.call(t)}(arguments),function(t){$(t,function(t,e){n[e]=t})}),n}function T(t,e,n){return b(t)?function(t,i){var r=[];return $(t,function(t,e,n){r.push(i(t,e,n))}),r}(t,e):function(t,i,r){var u={};return $(t,function(t,e,n){e=r?r(e,t):e,u[e]=i(t,e,n)}),u}(t,e,n)}function i(t,n,i){return T(t,function(t,e){return t[n].apply(t,i||[])})}var f,s;function r(t,i){var r,u=function(t){var i={};return(t=t||{}).publish=function(t,e){$(i[t],function(t){t(e)})},t.subscribe=function(t,e){i[t]=i[t]||[],i[t].push(e)},t.unsubscribe=function(n){$(i,function(t){var e=o(t,n);-1!==e&&t.splice(e,1)})},t}(),e=t.$;return u.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},u.$=function(t){return t?e.find(t):e},u.disable=function(){u.$().prop("disabled",!0),u.publish("isEnabled",!1)},u.enable=function(){u.$().prop("disabled",!1),u.publish("isEnabled",!0)},i.equalTo=function(t,e){return t===e},i.publishChange=function(t,e){var n=u.get();i.equalTo(n,r)||u.publish("change",{e:t,domElement:e}),r=n},u}function u(t,e){var n=r(t,e);return n.get=function(){return n.$().val()},n.set=function(t){n.$().val(t)},n.clear=function(){n.set("")},e.buildSetter=function(e){return function(t){e.call(n,t)}},n}function a(t,e){t=b(t)?t:[t],e=b(e)?e:[e];var n=!0;return t.length!==e.length?n=!1:$(t,function(t){!function(t,e){return-1!==o(t,e)}(e,t)&&(n=!1)}),n}function p(t){var e={},n=u(t,e);return n.getType=function(){return"button"},n.$().on("change",function(t){e.publishChange(t,this)}),n}function l(t){var e={},n=u(t,e);return n.getType=function(){return"checkbox"},n.get=function(){var t=[];return n.$().filter(":checked").each(function(){t.push(f(this).val())}),t},n.set=function(t){t=b(t)?t:[t],n.$().each(function(){f(this).prop("checked",!1)}),$(t,function(t){n.$().filter('[value="'+t+'"]').prop("checked",!0)})},e.equalTo=a,n.$().change(function(t){e.publishChange(t,this)}),n}function h(t){var e=s(t,{});return e.getType=function(){return"email"},e}function d(t){var e={},n=r(t,e);return n.getType=function(){return"file"},n.get=function(){return k(n.$().val().split("\\"))},n.clear=function(){this.$().each(function(){f(this).wrap("<form>").closest("form").get(0).reset(),f(this).unwrap()})},n.$().change(function(t){e.publishChange(t,this)}),n}function v(t){var e={},n=u(t,e);return n.getType=function(){return"hidden"},n.$().change(function(t){e.publishChange(t,this)}),n}function m(t){var e={},i=r(t,e);return i.getType=function(){return"file[multiple]"},i.get=function(){var t,e=i.$().get(0).files||[],n=[];for(t=0;t<(e.length||0);t+=1)n.push(e[t].name);return n},i.clear=function(){this.$().each(function(){f(this).wrap("<form>").closest("form").get(0).reset(),f(this).unwrap()})},i.$().change(function(t){e.publishChange(t,this)}),i}function w(t){var e={},n=u(t,e);return n.getType=function(){return"select[multiple]"},n.get=function(){return n.$().val()||[]},n.set=function(t){n.$().val(""===t?[]:b(t)?t:[t])},e.equalTo=a,n.$().change(function(t){e.publishChange(t,this)}),n}function C(t){var e=s(t,{});return e.getType=function(){return"password"},e}function V(t){var e={},n=u(t,e);return n.getType=function(){return"radio"},n.get=function(){return n.$().filter(":checked").val()||null},n.set=function(t){t?n.$().filter('[value="'+t+'"]').prop("checked",!0):n.$().each(function(){f(this).prop("checked",!1)})},n.$().change(function(t){e.publishChange(t,this)}),n}function E(t){var e={},n=u(t,e);return n.getType=function(){return"range"},n.$().change(function(t){e.publishChange(t,this)}),n}function j(t){var e={},n=u(t,e);return n.getType=function(){return"select"},n.$().change(function(t){e.publishChange(t,this)}),n}function q(t){var e={},n=u(t,e);return n.getType=function(){return"textarea"},n.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),n}function A(t){var e=s(t,{});return e.getType=function(){return"url"},e}function O(t){function e(e,t){(c(t)?t:u.find(t)).each(function(){var t=f(this).attr("name");r[t]=a[e]({$:f(this)})})}function n(e,t){var n=[],i=c(t)?t:u.find(t);c(t)?r[i.attr("name")]=a[e]({$:i}):(i.each(function(){-1===o(n,f(this).attr("name"))&&n.push(f(this).attr("name"))}),$(n,function(t){r[t]=a[e]({$:u.find('input[name="'+t+'"]')})}))}var r={},u=t.$,a=t.constructorOverride||{button:p,text:s,url:A,email:h,password:C,range:E,textarea:q,select:j,"select[multiple]":w,radio:V,checkbox:l,file:d,"file[multiple]":m,hidden:v};return u.is("input, select, textarea")?u.is('input[type="button"], button, input[type="submit"]')?e("button",u):u.is("textarea")?e("textarea",u):u.is('input[type="text"]')||u.is("input")&&!u.attr("type")?e("text",u):u.is('input[type="password"]')?e("password",u):u.is('input[type="email"]')?e("email",u):u.is('input[type="url"]')?e("url",u):u.is('input[type="range"]')?e("range",u):u.is("select")?u.is("[multiple]")?e("select[multiple]",u):e("select",u):u.is('input[type="file"]')?u.is("[multiple]")?e("file[multiple]",u):e("file",u):u.is('input[type="hidden"]')?e("hidden",u):u.is('input[type="radio"]')?n("radio",u):u.is('input[type="checkbox"]')?n("checkbox",u):e("text",u):(e("button",'input[type="button"], button, input[type="submit"]'),e("text",'input[type="text"]'),e("password",'input[type="password"]'),e("email",'input[type="email"]'),e("url",'input[type="url"]'),e("range",'input[type="range"]'),e("textarea","textarea"),e("select","select:not([multiple])"),e("select[multiple]","select[multiple]"),e("file",'input[type="file"]:not([multiple])'),e("file[multiple]",'input[type="file"][multiple]'),e("hidden",'input[type="hidden"]'),n("radio",'input[type="radio"]'),n("checkbox",'input[type="checkbox"]')),r}f=jQuery,s=function(t){var e={},n=u(t,e);return n.getType=function(){return"text"},n.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),n},f.fn.inputVal=function(t){var e=f(this),n=O({$:e});return e.is("input, textarea, select")?void 0===t?n[e.attr("name")].get():(n[e.attr("name")].set(t),e):void 0===t?i(n,"get"):($(t,function(t,e){n[e].set(t)}),e)},f.fn.inputOnChange=function(e){var t=f(this),n=O({$:t});return $(n,function(t){t.subscribe("change",function(t){e.call(t.domElement,t.e)})}),t},f.fn.inputDisable=function(){var t=f(this);return i(O({$:t}),"disable"),t},f.fn.inputEnable=function(){var t=f(this);return i(O({$:t}),"enable"),t},f.fn.inputClear=function(){var t=f(this);return i(O({$:t}),"clear"),t},g.fn.repeaterVal=function(){var t,i,r=function(t){if(1===t.length&&(0===t[0].key.length||1===t[0].key.length&&!t[0].key[0]))return t[0].val;$(t,function(t){t.head=t.key.shift()});var n,e,i=(e={},$(t,function(t){e[t.head]||(e[t.head]=[]),e[t.head].push(t)}),e);return/^[0-9]+$/.test(t[0].head)?(n=[],$(i,function(t){n.push(r(t))})):(n={},$(i,function(t,e){n[e]=r(t)})),n};return r((t=g(this).inputVal(),i=[],$(t,function(t,e){var n=[];"undefined"!==e&&(n.push(e.match(/^[^\[]*/)[0]),n=n.concat(T(e.match(/\[[^\]]*\]/g),function(t){return t.replace(/[\[\]]/g,"")})),i.push({val:t,key:n}))}),i))},g.fn.repeater=function(v){var m;return v=v||{},g(this).each(function(){function o(t,e){return t.filter(function(){return!e||0===g(this).closest(function(t,e){return T(t,function(t){return t[e]})}(e,"selector").join(",")).length})}function n(){return o(r.find("[data-repeater-item]"),v.repeaters)}var t=g(this),i=v.show||function(){g(this).show()},e=v.hide||function(t){t()},r=t.find("[data-repeater-list]").first(),u=r.find("[data-repeater-item]").first().clone().hide(),a=o(o(g(this).find("[data-repeater-item]"),v.repeaters).first().find("[data-repeater-delete]"),v.repeaters);v.isFirstItemUndeletable&&a&&a.remove();function c(){var t=r.data("repeater-list");return v.$parent?v.$parent.data("item-name")+"["+t+"]":t}function f(t){v.repeaters&&t.each(function(){var e=g(this);$(v.repeaters,function(t){e.find(t.selector).repeater(x(t,{$parent:e}))})})}function s(t,e,n){t&&$(t,function(t){n.call(e.find(t.selector)[0],t)})}var p=function(t,a,c){t.each(function(r){var u=g(this);u.data("item-name",a+"["+r+"]"),o(u.find("[name]"),c).each(function(){var t=g(this),e=t.attr("name").match(/\[[^\]]+\]/g),n=e?k(e).replace(/\[|\]/g,""):t.attr("name"),i=a+"["+r+"]["+n+"]"+(t.is(":checkbox")||t.attr("multiple")?"[]":"");t.attr("name",i),s(c,u,function(t){var e=g(this);p(o(e.find("[data-repeater-item]"),t.repeaters||[]),a+"["+r+"]["+e.find("[data-repeater-list]").first().data("repeater-list")+"]",t.repeaters)})})}),r.find("input[name][checked]").removeAttr("checked").prop("checked",!0)};p(n(),c(),v.repeaters),f(n()),v.initEmpty&&n().remove(),v.ready&&v.ready(function(){p(n(),c(),v.repeaters)});function l(t){var e=u.clone();d(e,t),v.repeaters&&f(e),i.call(e.get(0))}var h,d=(h=function(t,e,n){if(e||v.defaultValues){var i={};o(t.find("[name]"),n).each(function(){var t=g(this).attr("name").match(/\[([^\]]*)(\]|\]\[\])$/)[1];i[t]=g(this).attr("name")}),t.inputVal(T(function(t,i){var r;return b(t)?(r=[],$(t,function(t,e,n){i(t,e,n)&&r.push(t)})):(r={},$(t,function(t,e,n){i(t,e,n)&&(r[e]=t)})),r}(e||v.defaultValues,function(t,e){return i[e]}),y,function(t){return i[t]}))}s(n,t,function(i){var r=g(this);o(r.find("[data-repeater-item]"),i.repeaters).each(function(){var t=r.find("[data-repeater-list]").data("repeater-list");if(e&&e[t]){var n=g(this).clone();r.find("[data-repeater-item]").remove(),$(e[t],function(t){var e=n.clone();h(e,t,i.repeaters||[]),r.find("[data-repeater-list]").append(e)})}else h(g(this),i.defaultValues,i.repeaters||[])})})},function(t,e){r.append(t),p(n(),c(),v.repeaters),t.find("[name]").each(function(){g(this).inputClear()}),h(t,e||v.defaultValues,v.repeaters)});m=function(t){n().remove(),$(t,l)},o(t.find("[data-repeater-create]"),v.repeaters).click(function(){l()}),r.on("click","[data-repeater-delete]",function(){var t=g(this).closest("[data-repeater-item]").get(0);e.call(t,function(){g(t).remove(),p(n(),c(),v.repeaters)})})}),this.setList=m,this}}(jQuery);